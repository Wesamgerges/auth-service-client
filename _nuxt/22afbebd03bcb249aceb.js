(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{227:function(e,t,r){e.exports=r.p+"img/45137bb.svg"},228:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));r(43);var n=r(11),o=r(10),l=r(15),c=function(){function e(t){Object(o.a)(this,e),this.app=t,this.readableErrorMessages={E_PASSWORD_MISMATCH:"Invalid email or password.",E_USER_NOT_FOUND:"It seems you didn't register yet.",E_MISSING_DATABASE_ROW:"It seems you didn't register yet.",ER_NO_DEFAULT_FOR_FIELD:"You already registered. Please login",ER_DUP_ENTRY:"You already registered. Please login.",ER_BAD_NULL_ERROR:"Email and Password are required.",E_OAUTH_STATE_MISMATCH:"Something went wrong. Please re-login"}}var t,r,c,m;return Object(l.a)(e,[{key:"login",value:(m=Object(n.a)(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.app.$auth.loginWith("local",{data:{email:t.email,password:t.password}}).catch((function(e){r.reset(e)}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"register",value:(c=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.app.$axios.post("/auth/register",t);case 3:return r=e.sent,data=r.data,e.next=7,this.setAuthUser(data.token);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.reset(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(e){return c.apply(this,arguments)})},{key:"callback",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"error"!=(data=this.app.$route.query).status){e.next=4;break}throw new Error(data.message);case 4:return e.next=6,this.setAuthUser(data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.reset(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return r.apply(this,arguments)})},{key:"setAuthUser",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.token,n=t.type,this.app.$auth.setToken("local",n+" "+r),this.app.$auth.setStrategy("local"),e.next=5,this.app.$auth.fetchUser();case 5:this.app.$router.push("/");case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"reset",value:function(e){throw this.app.$auth.setToken("local",""),localStorage.setItem("errorMessage",this.getErrorMesssage(e.message||e)),this.app.$router.push("/login"),this.getErrorMesssage(e.message||e)}},{key:"getErrorMesssage",value:function(e){return this.readableErrorMessages[e]?this.readableErrorMessages[e]:e}}]),e}()},230:function(e,t,r){var content=r(236);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(34).default)("3e16e3d3",content,!0,{sourceMap:!1})},231:function(e,t,r){var content=r(238);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(34).default)("e96d1790",content,!0,{sourceMap:!1})},235:function(e,t,r){"use strict";var n=r(230);r.n(n).a},236:function(e,t,r){(t=r(33)(!1)).push([e.i,".btn-social>:first-child{top:5px}.card{box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)}",""]),e.exports=t},237:function(e,t,r){"use strict";var n=r(231);r.n(n).a},238:function(e,t,r){(t=r(33)(!1)).push([e.i,".container[data-v-602b6925]{min-height:70vh}",""]),e.exports=t},241:function(e,t,r){"use strict";r.r(t);r(43);var n=r(11),o=r(228),l=(r(63),{props:["register","errorMessage"],data:function(){return{user:{first_name:"",last_name:"",email:"",password:""},label:"Login",showError:!1}},computed:{serverUrl:function(){return"http://localhost:3333"}},watch:{register:function(e){this.label=e?"Register":"Login",this.reset()},errorMessage:function(e){this.showError=!!e,this.reset()}},methods:{submit:function(){this.$emit(this.register?"register":"login",{user:this.user})},reset:function(){this.user={first_name:"",last_name:"",email:"",password:""}}}}),c=(r(235),r(35)),m=Object(c.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row"},[r("div",{staticClass:"col d-flex justify-content-center"},[r("div",{staticClass:"card text-center mx-auto w-100"},[r("h5",{staticClass:"card-header"},[e._v(" "+e._s(e.label)+" ")]),e._v(" "),r("div",{staticClass:"card-body"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.submit("local")}}},[r("div",{staticClass:"form-group pb-2"},[r("b-alert",{attrs:{variant:"danger",dismissible:""},on:{dismissed:function(t){return e.$emit("dismissed")}},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v("\n                           "+e._s(e.errorMessage)+"\n                       ")])],1),e._v(" "),e.register?r("div",{staticClass:"form-group pb-2"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.first_name,expression:"user.first_name"}],staticClass:"form-control",attrs:{type:"text",id:"first_name",name:"first_name",placeholder:"First Name",required:""},domProps:{value:e.user.first_name},on:{input:function(t){t.target.composing||e.$set(e.user,"first_name",t.target.value)}}})]):e._e(),e._v(" "),e.register?r("div",{staticClass:"form-group pb-2"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.last_name,expression:"user.last_name"}],staticClass:"form-control",attrs:{type:"text",id:"last_name",name:"last_name",placeholder:"Last Name",required:""},domProps:{value:e.user.last_name},on:{input:function(t){t.target.composing||e.$set(e.user,"last_name",t.target.value)}}})]):e._e(),e._v(" "),r("div",{staticClass:"form-group pb-2"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{type:"email",id:"email",name:"email",placeholder:"Email",required:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-group pb-2"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",name:"email",placeholder:"Password",required:""},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-group pb-2"},[r("button",{staticClass:"form-control form-control-lg btn btn-primary",attrs:{type:"submit"}},[e._v(" "+e._s(e.label)+" ")])]),e._v(" "),r("hr",{staticClass:"hr-text",attrs:{"data-content":"OR"}}),e._v(" "),r("div",{staticClass:"form-group pb-2"},[r("a",{staticClass:"btn btn-social btn-google form-control form-control-lg text-center",attrs:{href:e.serverUrl+"/auth/redirect/"+e.label.toLowerCase()+"/google"}},[r("font-awesome-icon",{attrs:{icon:["fab","google"]}}),e._v(" "+e._s(e.label)+" with Google\n                       ")],1)]),e._v(" "),r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-social btn-facebook form-control form-control-lg text-center",attrs:{href:e.serverUrl+"/auth/redirect/"+e.label.toLowerCase()+"/facebook"}},[r("font-awesome-icon",{attrs:{icon:["fab","facebook"]}}),e._v(" "+e._s(e.label)+" with Facebook\n                       ")],1)])])])])])])}),[],!1,null,null,null).exports,d=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container d-flex align-items-center justify-content-center flex-column"},[t("img",{attrs:{src:r(227),alt:"Loading...",width:"80px"}}),this._v("\n  Logging in...\n")])}],f={auth:!1},h=(r(237),{layout:"plain",components:{login:m,loading:Object(c.a)(f,(function(){var e=this.$createElement;this._self._c;return this._m(0)}),d,!1,null,"602b6925",null).exports},data:function(){return{isRegister:!1,message:"Not registered yet?",errorMessage:"",loading:!1}},mounted:function(){this.$route.query.register&&(this.isRegister=this.$route.query.register),this.errorMessage=localStorage.getItem("errorMessage"),localStorage.removeItem("errorMessage")},watch:{isRegister:function(e){this.errorMessage="",localStorage.removeItem("errorMessage"),this.message=e?"Already registered?":"Not registered yet?"}},methods:{register:function(e){var t=this,r=e.user;return Object(n.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new o.a(t),e.prev=1,e.next=4,n.register(r);case 4:t.$router.push("/"),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),t.errorMessage=e.t0,e.abrupt("return");case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()},login:function(e){var t=this,r=e.user;return Object(n.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new o.a(t),e.next=3,n.login(r).catch((function(e){t.errorMessage=e}));case 3:t.loading=!1,t.$router.push("/");case 5:case"end":return e.stop()}}),e)})))()}}}),v=Object(c.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.loading?r("div",[r("loading")],1):r("div",[r("login",{attrs:{register:e.isRegister,errorMessage:e.errorMessage},on:{dismissed:function(t){e.errorMessage=""},login:e.login,register:e.register}}),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col d-flex justify-content-end mt-2 mx-auto",staticStyle:{"max-width":"400px"}},[r("a",{attrs:{href:"login?"+(e.isRegister?"register=1":"login=1")},on:{click:function(t){t.preventDefault(),e.isRegister=!e.isRegister}}},[e._v(" "+e._s(e.message)+" ")])])])],1)])}),[],!1,null,null,null);t.default=v.exports}}]);